<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CinnaPC</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <audio id="background-audio" src="audio.mp3" autoplay loop></audio>
    
    <!-- Pantalla de inicio de sesión -->
    <div id="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>✨ CinnaPC ✨</h1>
            </div>
            
            <div class="profile-section">
                <div class="profile-picture">
                    <img src="cinna-profile.png" alt="Profile Picture" class="profile-img">
                </div>
                <h2>AnaGDCP231</h2>
                <p class="welcome-text">¡Bienvenida de vuelta! 💕</p>
            </div>
            
            <div class="login-form">
                <button onclick="login()" class="login-button">
                    <span>ENTRAR</span>
                    <div class="button-decoration">→</div>
                </button>
            </div>
            
            <div class="login-footer">
                <div class="kawaii-elements">
                    <span class="floating-heart">💖</span>
                    <span class="floating-star">⭐</span>
                    <span class="floating-cloud">☁️</span>
                </div>
            </div>
        </div>
    </div>
    
    <div id="retro-bar" style="display: none;">
        <span id="app-name">CinnaPC</span>
        <div class="right-section">
            <button id="fullscreen-button" onclick="toggleFullscreen()"></button>
            <span id="time"></span>
            <span id="date"></span>
        </div>
    </div>

    <div id="desktop" style="display: none;">
        <div class="app-icon" data-app="trash">
            <img src="trash-bin.png" alt="Trash Bin Icon" class="icon">
            <span class="icon-label">Papelera</span>
        </div>
        <div class="app-icon" data-app="nubemail">
            <img src="mail.png" alt="NubeMail Icon" class="icon">
            <span class="icon-label">NubeMail</span>
        </div>        <div class="app-icon" data-app="musicroll">
            <img src="music.png" alt="MusicRoll Icon" class="icon">
            <span class="icon-label">MusicRoll</span>
        </div>        <div class="app-icon" data-app="lovenote">
            <img src="notepad.png" alt="LoveNote Icon" class="icon">
            <span class="icon-label">LoveLetter</span>
        </div>        <div class="app-icon" data-app="weather">
            <img src="rainbow.png" alt="Weather Icon" class="icon">
            <span class="icon-label">CupidWeather</span>
        </div>
        <div class="app-icon" data-app="sweettime">
            <img src="clock.png" alt="Clock Icon" class="icon">
            <span class="icon-label">SweetTime</span>
        </div>
        <div class="app-icon" data-app="lovestats">
            <img src="love-calendar.png" alt="LoveStats Icon" class="icon">
            <span class="icon-label">LoveStats</span>
        </div>
    </div>

    <div id="email-selection-container" style="display: none;">
        <div id="window-bar">
            <button class="close-button" onclick="closeNubeMail()">×</button>
            <div class="bars">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="window-title">NubeMail</div>
        </div>
        <div class="email-list">
            <h1>Bandeja de entrada</h1>
            <div class="email-item" onclick="openExistingEmail()">
                <div class="email-sender">De: Emergencias112</div>
                <div class="email-subject">...Puñeta</div>
                <div class="email-preview">...Cinnamoroll estaba disfrutando de un tranquilo día volando entre nubes...</div>
            </div>
            <div class="email-item new-adventure" onclick="openNewAdventure()">
                <div class="email-sender">De: Hello Kitty</div>
                <div class="email-subject">¡Una nueva aventura nos espera!</div>
                <div class="email-preview">Una misteriosa aventura te aguarda...</div>
            </div>
            <div class="email-item new-adventure" onclick="openSnakeAdventure()">
                <div class="email-sender">De: My Melody</div>
                <div class="email-subject">¡Desafío dulce serpiente!</div>
                <div class="email-preview">Un jardín de caramelos necesita orden kawaii...</div>
            </div>
        </div>
    </div>

    <div id="game-container" style="display: none;">
        <div id="window-bar">            <button class="close-button" onclick="backToEmailSelection()">×</button>
            <div class="bars">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="window-title">NubeMail</div>
        </div>
        <main>
            <section style="margin-left: 3%; margin-right: 3%; line-height: 1.5;" id="step-1" class="step active">
                <h2>Puñeta...</h2>
                <p style="text-align: justify;">...Cinnamoroll estaba disfrutando de un tranquilo día volando entre nubes de algodón cuando recibió una misión urgente: "Hay alguien muy especial esperando una gran <b>pregunta</b>, ¡pero solo un corazón valiente puede desbloquearla!".<br><br>Con sus orejitas extendidas como alas y su espíritu aventurero, Cinnamoroll deberá completar un desafío para reunir los fragmentos del mensaje secreto. Solo así podrá revelarlo...</p>
                <button onclick="nextStep(1)">Empezar</button>
            </section>
            <section id="step-2" class="step">
                <h2>SweetMatch</h2>
                <p>¡Ayuda a Cinnamoroll a encontrar todas las parejitas para descifrar el mensaje!</p>
                <button onclick="nextStep(2)">Siguiente</button>
            </section>
            <section id="step-3" class="step">
                <h2>¡Se ha desvelado la pregunta!</h2>
                <p>Ana GDCP, ¿quieres salir conmigo?</p>
                <button onclick="showFinalMessage()">Sí</button>
                <button>No</button>
            </section>
        </main>
        <footer id="footer" style="display: none;">
            <p>Hecho con ❤️ por Emergencias112</p>
        </footer>
    </div>

    <div id="new-adventure-container" style="display: none;">
        <div id="window-bar">
            <button class="close-button" onclick="backToEmailSelection()">×</button>
            <div class="bars">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="window-title">NubeMail</div>
        </div>
        <header>
            <h1>¡Una nueva aventura nos espera!</h1>
        </header>
        <main>
            <section style="margin-left: 3%; margin-right: 3%; line-height: 1.5;" id="adventure-step-1" class="adventure-step active">
                <h2>¡Hora de la aventura!</h2>
                <p style="text-align: justify;">Cinnamoroll ha recibido una carta urgente de Hello Kitty: "¡Necesito tu ayuda! My Melody, Kuromi, Pompompurin y yo hemos decidido hacer el viaje más increíble de nuestras vidas hacia <b>Granada</b>, pero el camino está lleno de desafíos que solo podemos superar trabajando juntas".<br><br>Con su cola esponjosa ondeando al viento y sus ojos brillantes de emoción, Cinnamoroll se monta en su avión y se prepara para la gran aventura. Pero no será fácil: tendrá que esquivar los obstáculos que Renfe le ha colocado por el camino. ¿Podrá llegar a su destino?</p>
                <button onclick="startNewAdventure()">¡Empezar la aventura!</button>
            </section>
            <section id="adventure-step-2" class="adventure-step">
                <h2>¡Vuela con Cinnamoroll!</h2>
                <p>Ayuda a Cinnamoroll a volar entre las tuberías sin chocar. ¡Presiona espacio para volar!</p>
                <div id="flappy-game-container">
                    <canvas id="flappyCanvas" width="600" height="400"></canvas>
                    <div id="game-instructions">
                        <p>🎮 Presiona ESPACIO para volar</p>
                        <p>⏱️ Tienes que sobrevivir para continuar</p>
                    </div>
                    <button id="start-flappy-btn" onclick="startFlappyGame()">¡Comenzar vuelo!</button>
                    <button id="next-adventure-btn" style="display: none;" onclick="completeAdventure()">¡Misión completada!</button>
                </div>
            </section>
            <section id="adventure-step-3" class="adventure-step">
                <h2>¡Aventura completada!</h2>
                <p style="line-height: 1.6;">¡Increíble! Cinnamoroll ha logrado volar exitosamente entre las nubes y ha llegado a Granada.</p>
                <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 30px; margin: 30px 0;">
                    <img src="travel.png" alt="Travel" style="width: 150px; height: 150px; image-rendering: pixelated;">
                    <img src="renfe-pixel.png" alt="Renfe" style="width: 180px; height: 150px; image-rendering: pixelated;">
                </div>
                <p style="line-height: 1.6;">La gran aventura continúa este sábado... ¡Prepárate para el viaje más emocionante!</p>
                <button onclick="backToEmailSelection()">Volver a la bandeja</button>
            </section>
        </main>
    </div>

    <div id="music-container" style="display: none;">
        <div id="window-bar">            <button class="close-button" onclick="closeMusicRoll()">×</button>
            <div class="bars">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="window-title">MusicRoll</div>
        </div>
        <div class="music-player">
            <img src="nota-musica.gif" alt="Music Icon" class="music-icon">
            <div class="music-info">
                <div class="song-title">Reproduciendo:<br><br><b>stream cafe - boba date</b></div>
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
                <div class="time-info">
                    <span id="current-time">00:00</span>
                    <span id="total-time">00:00</span>
                </div>
                <button id="play-pause-btn" onclick="togglePlay()">⏸</button>
                <div id="visualizer-wrapper">
                    <canvas id="visualizer-bars" width="360" height="90"></canvas>
                    <canvas id="visualizer-wave" width="360" height="60"></canvas>
                    <div class="visualizer-fallback" style="display:none;">Visualizador no soportado</div>
                </div>
            </div>        </div>
    </div>    <div id="weather-container" style="display: none;">
        <div id="window-bar">
            <button class="close-button" onclick="closeWeather()">×</button>
            <div class="bars">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="window-title">CupidWeather</div>
        </div>
        <div class="weather-content">
            <div class="weather-card today">
                <h2>Hoy</h2>
                <img src="kiss.png" alt="Today's Weather" class="weather-icon">
                <div class="forecast">Día de besitos</div>
                <div class="weather-details">Probabilidad de mimos: 100%</div>
            </div>
            <div class="weather-card tomorrow">
                <h2>Mañana</h2>
                <img src="sleep.png" alt="Tomorrow's Weather" class="weather-icon">
                <div class="forecast">Día de sueñecito</div>
                <div class="weather-details">Xucuxú esperado: Máximo</div>
            </div>
        </div>
    </div>    <div id="sweettime-container" style="display: none;">
        <div id="window-bar">
            <button class="close-button" onclick="closeSweetTime()">×</button>
            <div class="bars">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="window-title">SweetTime</div>
        </div>
        <div class="time-content">
            <img src="sandclock.gif" alt="Sand Clock" class="sand-clock">
            <div class="digital-time"></div>
            <div class="sweet-message"></div>
        </div>
    </div>

    <div id="lovenote-container" style="display: none;">
        <div id="window-bar">
            <button class="close-button" onclick="closeLoveNote()">×</button>
            <div class="bars">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="window-title">LoveLetter</div>
        </div>
        <div class="note-content">
            <textarea id="note-text" placeholder="Escribe aquí tus pensamientos..."></textarea>
        </div>
    </div>

    <div id="lovestats-container" style="display: none;">
        <div id="window-bar">
            <button class="close-button" onclick="closeLoveStats()">×</button>
            <div class="bars">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="window-title">LoveStats</div>
        </div>
        <div class="lovestats-content">
            <h2 class="lovestats-heading">Tiempo juntas 💖</h2>
            <img src="love.gif" alt="Love" class="lovestats-gif" />
            <div class="lovestats-grid">
                <div class="stat-box">
                    <div class="stat-label">Días</div>
                    <div class="stat-value" id="lovestats-days">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Semanas</div>
                    <div class="stat-value" id="lovestats-weeks">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Meses</div>
                    <div class="stat-value" id="lovestats-months">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Horas</div>
                    <div class="stat-value" id="lovestats-hours">0</div>
                </div>
            </div>
            <div class="lovestats-progress-wrapper">
                <div class="progress-label">Progreso hasta finalizar el plan de alergia ininterrumpida</div>
                <div class="lovestats-progress-bar">
                    <div class="lovestats-progress-fill" id="lovestats-progress"></div>
                </div>
            </div>
            <div class="lovestats-next" id="lovestats-next-milestone"></div>
        </div>
    </div>

    <!-- Snake Adventure Container -->
    <div id="snake-adventure-container" style="display:none;">
        <div id="window-bar">
            <button class="close-button" onclick="closeSnakeAdventure()">×</button>
            <div class="bars">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="window-title">NubeMail</div>
        </div>
        <header>
            <h1>¡Desafío dulce serpiente!</h1>
        </header>
        <main>
            <section id="snake-step-1" class="snake-step active" style="margin-left:3%;margin-right:3%;line-height:1.5;">
                <h2>El Jardín de Caramelos</h2>
                <p style="text-align:justify;">My Melody ha preparado un jardín lleno de caramelitos y frutas para Cinnamoroll, pero una serpiente dulce (¡tú!) debe recolectarlos con cuidado sin enredarse. Cada dulce aumenta tu longitud y tu puntuación. El desafío es infinito: ¡supera tu propio récord!</p>
                <button onclick="startSnakeGameIntro()">Empezar</button>
            </section>
            <section id="snake-step-2" class="snake-step" style="text-align:center;">
                <h2>¡Recolecta dulces!</h2>
                <div id="snake-game-wrapper">
                    <canvas id="snakeCanvas" width="480" height="360"></canvas>
                    <div id="snake-ui">
                        <div class="snake-stats">
                            <span id="snake-score">Puntos: 0</span>
                            <span id="snake-best">Récord: 0</span>
                        </div>
                        <div class="snake-instructions">Usa W A S D o flechas · P pausa</div>
                        <button id="snake-start-btn" onclick="startSnakeGame()">¡Comenzar!</button>
                        <button id="snake-restart-btn" style="display:none;" onclick="restartSnakeGame()">Reintentar</button>
                        <!-- Botón de nivel eliminado para modo infinito -->
                    </div>
                </div>
            </section>
            <!-- Pantalla final eliminada para modo infinito -->
        </main>
    </div>

    <script src="window-manager.js"></script>
    <script src="script.js"></script>
    <script src="game.js"></script>
    <script src="flappy-game.js"></script>
    <script src="snake-game.js"></script>
</body>
</html>
